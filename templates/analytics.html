{% extends "base.html" %}
{% block title %}Analytics{% endblock %}
{% block content %}
<h2>Analytics - {{ selected_commodity.name }}</h2>
<form method="get" class="mb-3">
  <select name="commodity_id" onchange="this.form.submit()" class="form-select">
    {% for c in commodities %}
      <option value="{{ c.id }}" {% if c.id == selected_commodity.id %}selected{% endif %}>{{ c.name }}</option>
    {% endfor %}
  </select>
</form>
<canvas id="reportChart" width="100%" height="40"></canvas>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  const chartData = {{ chart_data|safe }};
  new Chart(document.getElementById('reportChart'), chartData);
</script>
{% endblock %}
